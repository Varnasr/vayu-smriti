<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vayu Smriti वायु स्मृति | India's Air Quality Archive</title>
    <meta name="description" content="A citizen-led public archive documenting India's air quality crisis — health data, policy tracking, research, and testimonies.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+Devanagari:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #1a5276;
            --primary-light: #2e86ab;
            --secondary: #148f77;
            --accent: #e74c3c;
            --bg-light: #f8f9fa;
            --bg-card: #ffffff;
            --text-dark: #2c3e50;
            --text-muted: #6c757d;
            --border: #e9ecef;
            --aqi-good: #55a84f;
            --aqi-moderate: #f9c846;
            --aqi-poor: #ef8533;
            --aqi-very-poor: #e53935;
            --aqi-severe: #8b0000;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Noto Sans Devanagari', sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
        }

        /* Sargam Icon Styling */
        .si {
            width: 24px;
            height: 24px;
            display: inline-block;
            vertical-align: middle;
        }

        .si-sm {
            width: 16px;
            height: 16px;
        }

        .si-lg {
            width: 32px;
            height: 32px;
        }

        /* Header */
        .header {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-icon .si {
            filter: brightness(0) invert(1);
        }

        .logo-text h1 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
        }

        .logo-text span {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .header-actions {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-dark);
        }

        .btn-outline:hover {
            background: var(--bg-light);
        }

        .btn-primary {
            background: var(--primary);
            border: 1px solid var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-light);
        }

        .btn-primary .si {
            filter: brightness(0) invert(1);
        }

        /* Navigation */
        .nav {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 0;
        }

        .nav-link {
            padding: 1rem 1.5rem;
            text-decoration: none;
            color: var(--text-muted);
            font-size: 0.875rem;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .nav-link.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        /* AQI Ticker */
        .aqi-ticker {
            background: var(--text-dark);
            color: white;
            padding: 0.5rem 0;
            overflow: hidden;
        }

        .ticker-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 2rem;
            padding: 0 2rem;
            flex-wrap: wrap;
        }

        .ticker-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
        }

        .ticker-city {
            font-size: 0.75rem;
            color: rgba(255,255,255,0.7);
        }

        .ticker-value {
            font-size: 0.875rem;
            font-weight: 600;
            padding: 0.125rem 0.5rem;
            border-radius: 4px;
            min-width: 45px;
            text-align: center;
        }

        .ticker-value.good { background: var(--aqi-good); }
        .ticker-value.moderate { background: var(--aqi-moderate); color: #333; }
        .ticker-value.poor { background: var(--aqi-poor); }
        .ticker-value.very-poor { background: var(--aqi-very-poor); }
        .ticker-value.severe { background: var(--aqi-severe); }
        .ticker-value.loading { background: #555; }

        .ticker-label {
            font-size: 0.625rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            opacity: 0.7;
        }

        .ticker-source {
            font-size: 0.625rem;
            opacity: 0.5;
            margin-left: auto;
        }

        /* Main Content */
        .main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 2rem 0 3rem;
        }

        .hero h2 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .hero p {
            font-size: 1.125rem;
            color: var(--text-muted);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Archive Grid */
        .archive-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-top: 2rem;
        }

        @media (max-width: 768px) {
            .archive-grid {
                grid-template-columns: 1fr;
            }
        }

        .archive-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border);
            transition: all 0.2s;
            cursor: pointer;
        }

        .archive-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transform: translateY(-2px);
        }

        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .card-icon .si {
            width: 24px;
            height: 24px;
        }

        .card-icon.health {
            background: #fdeaea;
        }
        .card-icon.health .si {
            filter: invert(27%) sepia(51%) saturate(2878%) hue-rotate(346deg) brightness(104%) contrast(97%);
        }

        .card-icon.policy {
            background: #e8f4f8;
        }
        .card-icon.policy .si {
            filter: invert(24%) sepia(34%) saturate(1352%) hue-rotate(175deg) brightness(92%) contrast(89%);
        }

        .card-icon.research {
            background: #e8f5e9;
        }
        .card-icon.research .si {
            filter: invert(42%) sepia(52%) saturate(456%) hue-rotate(118deg) brightness(93%) contrast(90%);
        }

        .card-icon.testimonies {
            background: #fff3e0;
        }
        .card-icon.testimonies .si {
            filter: invert(55%) sepia(68%) saturate(582%) hue-rotate(349deg) brightness(97%) contrast(90%);
        }

        .archive-card h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
        }

        .archive-card p {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .card-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .card-meta span {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .card-meta .si {
            width: 14px;
            height: 14px;
            opacity: 0.6;
        }

        /* What Changed Tracker */
        .tracker-section {
            margin-top: 3rem;
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border);
        }

        .tracker-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .tracker-header h3 {
            font-size: 1.125rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tracker-timeline {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .timeline-item {
            display: flex;
            gap: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .timeline-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .timeline-date {
            min-width: 80px;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .timeline-content h4 {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .timeline-content p {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .timeline-tag {
            display: inline-block;
            font-size: 0.625rem;
            padding: 0.125rem 0.5rem;
            border-radius: 4px;
            margin-left: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .timeline-tag.policy {
            background: #e8f4f8;
            color: var(--primary);
        }

        .timeline-tag.legal {
            background: #fdeaea;
            color: #e53935;
        }

        /* CTA Section */
        .cta-section {
            margin-top: 3rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            color: white;
        }

        .cta-section h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .cta-section p {
            opacity: 0.9;
            margin-bottom: 1.5rem;
        }

        .cta-section .btn {
            background: white;
            color: var(--primary);
            border: none;
            padding: 0.75rem 1.5rem;
        }

        .cta-section .btn:hover {
            background: var(--bg-light);
        }

        .cta-section .btn .si {
            filter: invert(24%) sepia(34%) saturate(1352%) hue-rotate(175deg) brightness(92%) contrast(89%);
        }

        /* Principles Banner */
        .principles {
            display: flex;
            justify-content: center;
            gap: 2rem;
            padding: 1rem 0;
            margin-bottom: 1rem;
        }

        .principle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .principle-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--secondary);
        }

        /* Footer */
        .footer {
            background: var(--text-dark);
            color: white;
            padding: 2rem;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .footer-logo span {
            font-weight: 600;
        }

        .footer-text {
            font-size: 0.875rem;
            opacity: 0.7;
        }

        .footer-links {
            display: flex;
            gap: 1.5rem;
        }

        .footer-links a {
            color: white;
            text-decoration: none;
            font-size: 0.875rem;
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .footer-links a:hover {
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 640px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-content {
                overflow-x: auto;
            }

            .ticker-content {
                gap: 1.5rem;
            }

            .principles {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
            }

            .footer-content {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">
                    <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Globe_detailed.svg" alt="" class="si">
                </div>
                <div class="logo-text">
                    <h1>Vayu Smriti <span style="font-weight: 400;">वायु स्मृति</span></h1>
                    <span>India's Air Quality Archive</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="btn btn-outline" onclick="toggleLanguage()">हिंदी</button>
                <a href="#share" class="btn btn-primary">
                    <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Add.svg" alt="" class="si si-sm">
                    Share Testimony
                </a>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-content">
            <a href="#" class="nav-link active">Archive</a>
            <a href="#" class="nav-link">Live Data</a>
            <a href="#" class="nav-link">AQI Database</a>
            <a href="#" class="nav-link">Conference 2026</a>
            <a href="#" class="nav-link">About</a>
        </div>
    </nav>

    <!-- AQI Ticker -->
    <div class="aqi-ticker">
        <div class="ticker-content">
            <div class="ticker-item">
                <span class="ticker-city">Delhi:</span>
                <span class="ticker-value loading" id="aqi-delhi">--</span>
                <span class="ticker-label" id="label-delhi">Loading</span>
            </div>
            <div class="ticker-item">
                <span class="ticker-city">Noida:</span>
                <span class="ticker-value loading" id="aqi-noida">--</span>
                <span class="ticker-label" id="label-noida">Loading</span>
            </div>
            <div class="ticker-item">
                <span class="ticker-city">Gurugram:</span>
                <span class="ticker-value loading" id="aqi-gurgaon">--</span>
                <span class="ticker-label" id="label-gurgaon">Loading</span>
            </div>
            <div class="ticker-item">
                <span class="ticker-city">Ghaziabad:</span>
                <span class="ticker-value loading" id="aqi-ghaziabad">--</span>
                <span class="ticker-label" id="label-ghaziabad">Loading</span>
            </div>
            <span class="ticker-source">Source: OpenAQ</span>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main">
        <!-- Hero -->
        <section class="hero">
            <h2>What have we learned?</h2>
            <p>A permanent public record of India's air quality crisis — so that evidence persists, patterns become visible, and accountability becomes possible.</p>
            
            <div class="principles">
                <div class="principle">
                    <div class="principle-dot"></div>
                    <span>Open</span>
                </div>
                <div class="principle">
                    <div class="principle-dot"></div>
                    <span>Non-partisan</span>
                </div>
                <div class="principle">
                    <div class="principle-dot"></div>
                    <span>Transparent</span>
                </div>
            </div>
        </section>

        <!-- Archive Grid -->
        <section class="archive-grid">
            <article class="archive-card" onclick="location.href='#health-burden'">
                <div class="card-icon health">
                    <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Heart.svg" alt="" class="si">
                </div>
                <h3>Health Burden</h3>
                <p>Mortality data, epidemiological studies, disease burden estimates, and hospital admission patterns linked to air pollution.</p>
                <div class="card-meta">
                    <span>
                        <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Bar_chart.svg" alt="" class="si">
                        12 datasets
                    </span>
                    <span>
                        <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Article.svg" alt="" class="si">
                        45 studies
                    </span>
                </div>
            </article>

            <article class="archive-card" onclick="location.href='#policy-legal'">
                <div class="card-icon policy">
                    <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Clipboard.svg" alt="" class="si">
                </div>
                <h3>Policy & Legal</h3>
                <p>NCAP documents, GRAP protocols, NGT and Supreme Court orders, state action plans, and government notifications.</p>
                <div class="card-meta">
                    <span>
                        <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Hammer.svg" alt="" class="si">
                        28 court orders
                    </span>
                    <span>
                        <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Assignment.svg" alt="" class="si">
                        15 policies
                    </span>
                </div>
            </article>

            <article class="archive-card" onclick="location.href='#research'">
                <div class="card-icon research">
                    <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Book.svg" alt="" class="si">
                </div>
                <h3>Research</h3>
                <p>Peer-reviewed papers, technical reports, source apportionment studies, and open datasets from leading institutions.</p>
                <div class="card-meta">
                    <span>
                        <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Article.svg" alt="" class="si">
                        67 papers
                    </span>
                    <span>
                        <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Archive.svg" alt="" class="si">
                        8 datasets
                    </span>
                </div>
            </article>

            <article class="archive-card" onclick="location.href='#testimonies'">
                <div class="card-icon testimonies">
                    <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_User.svg" alt="" class="si">
                </div>
                <h3>Testimonies</h3>
                <p>Citizen voices from across India — auto drivers, students, parents, health workers — sharing their lived experience of the crisis.</p>
                <div class="card-meta">
                    <span>
                        <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Mic.svg" alt="" class="si">
                        Coming soon
                    </span>
                    <span>
                        <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Globe_detailed.svg" alt="" class="si">
                        Hindi + English
                    </span>
                </div>
            </article>
        </section>

        <!-- What Changed Tracker -->
        <section class="tracker-section">
            <div class="tracker-header">
                <h3>
                    <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Flag.svg" alt="" class="si">
                    "What Changed?" Tracker
                </h3>
                <a href="#" class="btn btn-outline" style="font-size: 0.75rem;">View All</a>
            </div>
            <div class="tracker-timeline">
                <div class="timeline-item">
                    <div class="timeline-date">24 Dec 2025</div>
                    <div class="timeline-content">
                        <h4>GRAP Stage IV revoked across NCR <span class="timeline-tag policy">Policy</span></h4>
                        <p>CAQM revokes Stage IV restrictions as AQI improves to 271 (Poor category) following favorable meteorological conditions.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">17 Dec 2025</div>
                    <div class="timeline-content">
                        <h4>Supreme Court hearing on overage vehicles <span class="timeline-tag legal">Legal</span></h4>
                        <p>SC revises August interim order; directs enforcement action on diesel vehicles older than 10 years and petrol vehicles older than 15 years.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">14 Dec 2025</div>
                    <div class="timeline-content">
                        <h4>Delhi records worst December AQI; SC advises virtual hearings <span class="timeline-tag legal">Legal</span></h4>
                        <p>AQI hits 461 — second-worst December air quality on record. Supreme Court issues advisory for lawyers to opt for virtual hearings.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">13 Dec 2025</div>
                    <div class="timeline-content">
                        <h4>GRAP Stage IV invoked in Delhi-NCR <span class="timeline-tag policy">Policy</span></h4>
                        <p>Strictest GRAP measures activated — construction banned, truck entry restricted, schools advised to shift online.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section" id="share">
            <h3>Your voice matters</h3>
            <p>Share your experience of living with air pollution. Your testimony becomes part of the permanent public record.</p>
            <a href="#" class="btn">
                Submit Your Story
                <img src="https://cdn.jsdelivr.net/npm/sargam-icons@1.6.7/Icons/Line/si_Arrow_right.svg" alt="" class="si si-sm">
            </a>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">
                <span>Vayu Smriti</span>
                <span style="opacity: 0.5; margin: 0 0.5rem;">|</span>
                <span style="font-weight: 400; opacity: 0.7;">Air Quality Initiative</span>
            </div>
            <div class="footer-text">
                A citizen-led initiative by Dr. Manmohan Singh Fellows
            </div>
            <div class="footer-links">
                <a href="#">About</a>
                <a href="#">Contribute</a>
                <a href="https://github.com/Varnasr/vayu-smriti">GitHub</a>
                <a href="mailto:vayusmriti@manmohansinghfellows.com">Contact</a>
            </div>
        </div>
    </footer>

    <script>
        // OpenAQ API Integration for Live AQI Data
        async function fetchAQI() {
            const cities = [
                { id: 'delhi', name: 'Delhi', lat: 28.6139, lon: 77.2090 },
                { id: 'noida', name: 'Noida', lat: 28.5355, lon: 77.3910 },
                { id: 'gurgaon', name: 'Gurugram', lat: 28.4595, lon: 77.0266 },
                { id: 'ghaziabad', name: 'Ghaziabad', lat: 28.6692, lon: 77.4538 }
            ];

            for (const city of cities) {
                try {
                    // OpenAQ v3 API
                    const response = await fetch(
                        `https://api.openaq.org/v3/locations?coordinates=${city.lat},${city.lon}&radius=25000&limit=1&parameter=pm25`,
                        {
                            headers: {
                                'Accept': 'application/json'
                            }
                        }
                    );
                    
                    if (response.ok) {
                        const data = await response.json();
                        if (data.results && data.results.length > 0) {
                            const location = data.results[0];
                            // Get latest measurement
                            const latestResponse = await fetch(
                                `https://api.openaq.org/v3/locations/${location.id}/latest`,
                                {
                                    headers: {
                                        'Accept': 'application/json'
                                    }
                                }
                            );
                            
                            if (latestResponse.ok) {
                                const latestData = await latestResponse.json();
                                if (latestData.results && latestData.results.length > 0) {
                                    const pm25 = latestData.results.find(r => r.parameter === 'pm25');
                                    if (pm25) {
                                        const aqi = calculateAQI(pm25.value);
                                        updateAQIDisplay(city.id, aqi);
                                        continue;
                                    }
                                }
                            }
                        }
                    }
                    // If API fails, use fallback
                    useFallbackData(city.id);
                } catch (error) {
                    console.log(`Error fetching ${city.name}:`, error);
                    useFallbackData(city.id);
                }
            }
        }

        // Calculate AQI from PM2.5 (US EPA breakpoints)
        function calculateAQI(pm25) {
            const breakpoints = [
                { low: 0, high: 12, aqiLow: 0, aqiHigh: 50 },
                { low: 12.1, high: 35.4, aqiLow: 51, aqiHigh: 100 },
                { low: 35.5, high: 55.4, aqiLow: 101, aqiHigh: 150 },
                { low: 55.5, high: 150.4, aqiLow: 151, aqiHigh: 200 },
                { low: 150.5, high: 250.4, aqiLow: 201, aqiHigh: 300 },
                { low: 250.5, high: 350.4, aqiLow: 301, aqiHigh: 400 },
                { low: 350.5, high: 500.4, aqiLow: 401, aqiHigh: 500 }
            ];

            for (const bp of breakpoints) {
                if (pm25 >= bp.low && pm25 <= bp.high) {
                    return Math.round(
                        ((bp.aqiHigh - bp.aqiLow) / (bp.high - bp.low)) * (pm25 - bp.low) + bp.aqiLow
                    );
                }
            }
            return pm25 > 500 ? 500 : 0;
        }

        function getAQICategory(aqi) {
            if (aqi <= 50) return { label: 'Good', class: 'good' };
            if (aqi <= 100) return { label: 'Moderate', class: 'moderate' };
            if (aqi <= 200) return { label: 'Poor', class: 'poor' };
            if (aqi <= 300) return { label: 'Very Poor', class: 'very-poor' };
            return { label: 'Severe', class: 'severe' };
        }

        function updateAQIDisplay(cityId, aqi) {
            const valueEl = document.getElementById(`aqi-${cityId}`);
            const labelEl = document.getElementById(`label-${cityId}`);
            const category = getAQICategory(aqi);
            
            valueEl.textContent = aqi;
            valueEl.className = `ticker-value ${category.class}`;
            labelEl.textContent = category.label;
        }

        function useFallbackData(cityId) {
            // Fallback data based on typical December 2025 readings
            const fallbackData = {
                delhi: 285,
                noida: 312,
                gurgaon: 267,
                ghaziabad: 298
            };
            updateAQIDisplay(cityId, fallbackData[cityId]);
        }

        function toggleLanguage() {
            alert('Hindi version coming soon / हिंदी संस्करण जल्द आ रहा है');
        }

        // Initialize
        fetchAQI();
        
        // Refresh AQI every 30 minutes
        setInterval(fetchAQI, 30 * 60 * 1000);
    </script>
</body>
</html>
